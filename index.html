<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RR Tools</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAXVBMVEX////AAD/WVn/T0//MjL/vr7/qan/kJD/f3//a2v/5ub/zMz/xsb/uru/AADdAADlAAD/goL/QED/ICD/YWH/SEj/n5//dXX/MjL/ICD/SEj/YWH/goL/dXX/n5//qan/uru/xsb/zMz/5ub/AAD////XLr47AAACZUlEQVR4nO3ci3KiMBiG4SAIgiCoKIr2/k+5pU2HhEIIBwPzftW9L5ezs2tWAmQYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYhmEYg-95/fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-g-1/5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn--5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-g-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+fn-5+-5+fn-5+fn-5+fn-5+fn--5+fn-5+fn-5+fn-5+fn-5+fn--5+fn-5+fn-5+fn-5+-5+fn--5+fn-5+fn-5+fn-5+fn-... existing code ... -->
                    <h2 class="text-xl font-semibold mb-2">Generador de QR</h2>
                    <p class="text-gray-500">Convierte texto o enlaces en un código QR.</p>
                </div>
            </main>
        </div>

        <!-- Contenedor para las herramientas (inicialmente oculto) -->
        <div id="tool-container" class="hidden">
            <button onclick="showHomeScreen()" class="mb-8 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg inline-flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                Volver al inicio
            </button>

            <!-- Herramienta: PDF a JPG -->
            <div id="pdf-to-jpg" class="tool-content hidden bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-center">Convertir PDF a JPG</h2>
                <div class="max-w-md mx-auto">
                    <label for="pdf-to-jpg-input" class="block mb-2 text-sm font-medium text-gray-700">Selecciona un archivo PDF:</label>
                    <input type="file" id="pdf-to-jpg-input" accept=".pdf" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100"/>
                    <div id="pdf-to-jpg-output" class="mt-6 grid grid-cols-2 md:grid-cols-3 gap-4"></div>
                    <div id="pdf-to-jpg-loader" class="hidden text-center mt-4">Cargando...</div>
                </div>
            </div>

            <!-- Herramienta: Unir PDF -->
            <div id="merge-pdf" class="tool-content hidden bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-center">Unir Archivos PDF</h2>
                <div class="max-w-md mx-auto">
                    <label for="merge-pdf-input" class="block mb-2 text-sm font-medium text-gray-700">Selecciona dos o más archivos PDF:</label>
                    <input type="file" id="merge-pdf-input" accept=".pdf" multiple class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"/>
                    <button id="merge-pdf-button" class="mt-6 w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg disabled:bg-blue-300" disabled>Unir y Descargar PDF</button>
                    <div id="merge-pdf-list" class="mt-4 text-sm text-gray-600"></div>
                </div>
            </div>

            <!-- Herramienta: JPG a PDF -->
            <div id="jpg-to-pdf" class="tool-content hidden bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-center">Convertir JPG a PDF</h2>
                <div class="max-w-md mx-auto">
                    <label for="jpg-to-pdf-input" class="block mb-2 text-sm font-medium text-gray-700">Selecciona una o más imágenes JPG/PNG:</label>
                    <input type="file" id="jpg-to-pdf-input" accept="image/jpeg,image/png" multiple class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"/>
                    <button id="jpg-to-pdf-button" class="mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg disabled:bg-green-300" disabled>Convertir y Descargar PDF</button>
                    <div id="jpg-to-pdf-list" class="mt-4 text-sm text-gray-600"></div>
                </div>
            </div>

            <!-- Herramienta: Generador de Contraseñas -->
            <div id="password-generator" class="tool-content hidden bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-center">Generador de Contraseñas Seguras</h2>
                <div class="max-w-md mx-auto">
                    <div class="relative mb-4 bg-gray-200 p-4 rounded-lg text-center">
                        <span id="password-output" class="text-2xl font-mono tracking-wider text-gray-800">TuContraseñaAquí</span>
                        <button id="copy-password-button" class="absolute top-1/2 right-4 -translate-y-1/2 text-gray-500 hover:text-gray-800">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label for="pass-length" class="flex justify-between text-sm font-medium text-gray-700">Longitud: <span id="pass-length-value">16</span></label>
                            <input type="range" id="pass-length" min="8" max="32" value="16" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="flex items-center"><input type="checkbox" id="pass-uppercase" checked class="h-4 w-4 rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"><label for="pass-uppercase" class="ml-2 block text-sm text-gray-900">Mayúsculas (A-Z)</label></div>
                            <div class="flex items-center"><input type="checkbox" id="pass-lowercase" checked class="h-4 w-4 rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"><label for="pass-lowercase" class="ml-2 block text-sm text-gray-900">Minúsculas (a-z)</label></div>
                            <div class="flex items-center"><input type="checkbox" id="pass-numbers" checked class="h-4 w-4 rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"><label for="pass-numbers" class="ml-2 block text-sm text-gray-900">Números (0-9)</label></div>
                            <div class="flex items-center"><input type="checkbox" id="pass-symbols" checked class="h-4 w-4 rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"><label for="pass-symbols" class="ml-2 block text-sm text-gray-900">Símbolos (!@#$)</label></div>
                        </div>
                    </div>
                    <button id="generate-password-button" class="mt-8 w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-4 rounded-lg">Generar Nueva Contraseña</button>
                </div>
            </div>

            <!-- Herramienta: Generador de QR -->
            <div id="qr-generator" class="tool-content hidden bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-center">Generador de Códigos QR</h2>
                <div class="max-w-md mx-auto">
                    <label for="qr-input" class="block mb-2 text-sm font-medium text-gray-700">Introduce el texto o URL:</label>
                    <textarea id="qr-input" rows="4" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" placeholder="https://ejemplo.com"></textarea>
                    <button id="generate-qr-button" class="mt-4 w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg">Generar QR</button>
                    <div id="qr-output" class="mt-6 flex flex-col items-center">
                        <canvas id="qr-canvas" class="rounded-lg shadow-md"></canvas>
                        <a id="download-qr-link" class="hidden mt-4 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">Descargar QR</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para mensajes -->
    <div id="message-modal" class="modal">
        <div class="modal-content">
            <span id="modal-close-button" class="modal-close">&times;</span>
            <p id="modal-message" class="text-lg"></p>
        </div>
    </div>


    <script>
        // Configuración de pdf.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js`;

        // --- NAVEGACIÓN ---
        const homeScreen = document.getElementById('home-screen');
        const toolContainer = document.getElementById('tool-container');
        const toolContents = document.querySelectorAll('.tool-content');

        function showTool(toolId) {
            homeScreen.classList.add('hidden');
            toolContainer.classList.remove('hidden');
            toolContents.forEach(tool => {
                if (tool.id === toolId) {
                    tool.classList.remove('hidden');
                } else {
                    tool.classList.add('hidden');
                }
            });
            if (toolId === 'password-generator') {
                generatePassword();
            }
        }

        function showHomeScreen() {
            homeScreen.classList.remove('hidden');
            toolContainer.classList.add('hidden');
        }

        // --- MODAL DE MENSAJES ---
        const modal = document.getElementById('message-modal');
        const modalMessage = document.getElementById('modal-message');
        const modalCloseButton = document.getElementById('modal-close-button');

        function showMessage(message) {
            modalMessage.textContent = message;
            modal.style.display = "flex";
        }

        modalCloseButton.onclick = function() {
            modal.style.display = "none";
        }
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // --- HERRAMIENTA 1: PDF a JPG ---
        const pdfToJpgInput = document.getElementById('pdf-to-jpg-input');
        const pdfToJpgOutput = document.getElementById('pdf-to-jpg-output');
        const pdfToJpgLoader = document.getElementById('pdf-to-jpg-loader');

        pdfToJpgInput.addEventListener('change', async (event) => {
            const file = event.target.files[0];
            if (!file) return;

            pdfToJpgOutput.innerHTML = '';
            pdfToJpgLoader.classList.remove('hidden');

            try {
                const fileReader = new FileReader();
                fileReader.onload = async (e) => {
                    const typedarray = new Uint8Array(e.target.result);
                    const pdf = await pdfjsLib.getDocument(typedarray).promise;

                    for (let i = 1; i <= pdf.numPages; i++) {
                        const page = await pdf.getPage(i);
                        const viewport = page.getViewport({ scale: 1.5 });
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;

                        await page.render({ canvasContext: context, viewport: viewport }).promise;
                        
                        const img = document.createElement('a');
                        img.href = canvas.toDataURL('image/jpeg');
                        img.download = `${file.name.replace('.pdf', '')}-pagina-${i}.jpg`;
                        img.innerHTML = `<img src="${img.href}" class="w-full h-auto rounded-lg shadow-md" alt="Página ${i}">`;
                        pdfToJpgOutput.appendChild(img);
                    }
                    pdfToJpgLoader.classList.add('hidden');
                };
                fileReader.readAsArrayBuffer(file);
            } catch (error) {
                console.error('Error al procesar el PDF:', error);
                showMessage('Error al procesar el PDF. Asegúrate de que es un archivo válido.');
                pdfToJpgLoader.classList.add('hidden');
            }
        });

        // --- HERRAMIENTA 2: UNIR PDF ---
        const { PDFDocument } = PDFLib;
        const mergePdfInput = document.getElementById('merge-pdf-input');
        const mergePdfButton = document.getElementById('merge-pdf-button');
        const mergePdfList = document.getElementById('merge-pdf-list');

        mergePdfInput.addEventListener('change', () => {
            const files = mergePdfInput.files;
            if (files.length > 1) {
                mergePdfButton.disabled = false;
                let fileNames = Array.from(files).map(f => f.name).join(', ');
                mergePdfList.textContent = `Archivos seleccionados: ${fileNames}`;
            } else {
                mergePdfButton.disabled = true;
                mergePdfList.textContent = 'Por favor, selecciona al menos 2 archivos.';
            }
        });

        mergePdfButton.addEventListener('click', async () => {
            mergePdfButton.disabled = true;
            mergePdfButton.textContent = 'Procesando...';
            try {
                const mergedPdf = await PDFDocument.create();
                for (const file of mergePdfInput.files) {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await PDFDocument.load(arrayBuffer);
                    const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                    copiedPages.forEach((page) => mergedPdf.addPage(page));
                }
                const pdfBytes = await mergedPdf.save();
                const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'documento-unido.pdf';
                link.click();
            } catch (error) {
                console.error('Error al unir los PDFs:', error);
                showMessage('Hubo un error al unir los PDFs. Inténtalo de nuevo.');
            } finally {
                mergePdfButton.disabled = false;
                mergePdfButton.textContent = 'Unir y Descargar PDF';
            }
        });

        // --- HERRAMIENTA 3: JPG a PDF ---
        const jpgToPdfInput = document.getElementById('jpg-to-pdf-input');
        const jpgToPdfButton = document.getElementById('jpg-to-pdf-button');
        const jpgToPdfList = document.getElementById('jpg-to-pdf-list');

        jpgToPdfInput.addEventListener('change', () => {
            const files = jpgToPdfInput.files;
            if (files.length > 0) {
                jpgToPdfButton.disabled = false;
                let fileNames = Array.from(files).map(f => f.name).join(', ');
                jpgToPdfList.textContent = `Imágenes seleccionadas: ${fileNames}`;
            } else {
                jpgToPdfButton.disabled = true;
                jpgToPdfList.textContent = '';
            }
        });

        jpgToPdfButton.addEventListener('click', async () => {
            jpgToPdfButton.disabled = true;
            jpgToPdfButton.textContent = 'Creando PDF...';
            try {
                const pdfDoc = await PDFDocument.create();
                for (const file of jpgToPdfInput.files) {
                     const arrayBuffer = await file.arrayBuffer();
                     let image;
                     if (file.type === 'image/jpeg') {
                        image = await pdfDoc.embedJpg(arrayBuffer);
                     } else if (file.type === 'image/png') {
                        image = await pdfDoc.embedPng(arrayBuffer);
                     } else {
                        throw new Error('Formato de imagen no soportado. Usa JPG o PNG.');
                     }
                    const page = pdfDoc.addPage([image.width, image.height]);
                    page.drawImage(image, {
                        x: 0,
                        y: 0,
                        width: image.width,
                        height: image.height,
                    });
                }
                const pdfBytes = await pdfDoc.save();
                const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'convertido-desde-imagenes.pdf';
                link.click();
            } catch (error) {
                console.error('Error al convertir imagen a PDF:', error);
                showMessage('Hubo un error al crear el PDF. Asegúrate de que todas las imágenes son JPG o PNG válidos.');
            } finally {
                jpgToPdfButton.disabled = false;
                jpgToPdfButton.textContent = 'Convertir y Descargar PDF';
            }
        });

        // --- HERRAMIENTA 4: GENERADOR DE CONTRASEÑAS ---
        const passwordOutput = document.getElementById('password-output');
        const passLength = document.getElementById('pass-length');
        const passLengthValue = document.getElementById('pass-length-value');
        const passUppercase = document.getElementById('pass-uppercase');
        const passLowercase = document.getElementById('pass-lowercase');
        const passNumbers = document.getElementById('pass-numbers');
        const passSymbols = document.getElementById('pass-symbols');
        const generatePasswordButton = document.getElementById('generate-password-button');
        const copyPasswordButton = document.getElementById('copy-password-button');

        const charSets = {
            uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            lowercase: 'abcdefghijklmnopqrstuvwxyz',
            numbers: '0123456789',
            symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
        };

        function generatePassword() {
            let charset = '';
            if (passUppercase.checked) charset += charSets.uppercase;
            if (passLowercase.checked) charset += charSets.lowercase;
            if (passNumbers.checked) charset += charSets.numbers;
            if (passSymbols.checked) charset += charSets.symbols;

            if (charset === '') {
                showMessage('Por favor, selecciona al menos un tipo de carácter.');
                passwordOutput.textContent = 'Selecciona opciones';
                return;
            }

            let password = '';
            const length = passLength.value;
            for (let i = 0; i < length; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            passwordOutput.textContent = password;
        }
        
        passLength.addEventListener('input', (e) => {
            passLengthValue.textContent = e.target.value;
            generatePassword();
        });
        generatePasswordButton.addEventListener('click', generatePassword);
        [passUppercase, passLowercase, passNumbers, passSymbols].forEach(el => el.addEventListener('change', generatePassword));

        copyPasswordButton.addEventListener('click', () => {
            const password = passwordOutput.textContent;
            if (password && password !== 'TuContraseñaAquí' && password !== 'Selecciona opciones') {
                const textArea = document.createElement("textarea");
                textArea.value = password;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showMessage('¡Contraseña copiada!');
                } catch (err) {
                    showMessage('No se pudo copiar la contraseña.');
                }
                document.body.removeChild(textArea);
            }
        });

        // --- HERRAMIENTA 5: GENERADOR DE QR ---
        const qrInput = document.getElementById('qr-input');
        const generateQrButton = document.getElementById('generate-qr-button');
        const qrCanvas = document.getElementById('qr-canvas');
        const downloadQrLink = document.getElementById('download-qr-link');

        function generateQR() {
            const text = qrInput.value;
            if (text.trim() === '') {
                showMessage('Por favor, introduce texto o una URL para generar el QR.');
                return;
            }
            QRCode.toCanvas(qrCanvas, text, { width: 256, errorCorrectionLevel: 'H' }, function (error) {
                if (error) {
                    console.error(error);
                    showMessage('No se pudo generar el código QR.');
                } else {
                    downloadQrLink.href = qrCanvas.toDataURL('image/png');
                    downloadQrLink.download = 'codigo-qr.png';
                    downloadQrLink.classList.remove('hidden');
                }
            });
        }
        
        generateQrButton.addEventListener('click', generateQR);
        qrInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                generateQR();
            }
        });

    </script>
</body>
</html>
```eof
